# Домашнее задание к занятию "13.1 контейнеры, поды, deployment, statefulset, services, endpoints"

> Настроив кластер, подготовьте приложение к запуску в нём. Приложение стандартное: бекенд, фронтенд, база данных. Его можно найти в папке 13-kubernetes-config.

## Задание 1: подготовить тестовый конфиг для запуска приложения

> Для начала следует подготовить запуск приложения в stage окружении с простыми настройками. Требования:
> * под содержит в себе 2 контейнера — фронтенд, бекенд;
> * регулируется с помощью deployment фронтенд и бекенд;
> * база данных — через statefulset.

Приложения запущены в отдельном неймспейсе `stage`. Манифесты:
* [deployment | Приложение](./13-kubernetes-config-01-objects/stage/app.yml)
* [statefullset | БД](./13-kubernetes-config-01-objects/stage/db.yml)

Скриншот вывода команды `kubectl` со списком запущенных объектов каждого типа:

![Скриншот терминала](./media/13-1-%D1%81%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82-%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0.png)

## Задание 2: подготовить конфиг для production окружения

> Следующим шагом будет запуск приложения в production окружении. Требования сложнее:
> * каждый компонент (база, бекенд, фронтенд) запускаются в своем поде, регулируются отдельными deployment’ами;
> * для связи используются service (у каждого компонента свой);
> * в окружении фронта прописан адрес сервиса бекенда;
> * в окружении бекенда прописан адрес сервиса базы данных.

Приложения запущены в отдельном неймспейсе `prod`. Манифесты:
* [deployment | backend](./13-kubernetes-config-01-objects/prod/back.yml)
* [deployment | fronend](./13-kubernetes-config-01-objects/prod/front.yml)
* [statefullset | БД](./13-kubernetes-config-01-objects/prod/db.yml)

Скриншот вывода команды `kubectl` со списком запущенных объектов каждого типа:

![Скриншот терминала](./media/13-2-%D1%81%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82-%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0.png)

## Задание 3 (*): добавить endpoint на внешний ресурс api

> Приложению потребовалось внешнее api, и для его использования лучше добавить endpoint в кластер, направленный на это api. Требования:
> * добавлен endpoint до внешнего api (например, геокодер).

Манифест: [endpoint.yml](./13-kubernetes-config-01-objects/prod/endpoint.yml)

Скриншот терминала:
* Список эндпоинтов
* `curl` из пода фронта к сервису/эндпоинту

![Скриншот терминала](./media/13-3-%D1%81%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82-%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0.png)